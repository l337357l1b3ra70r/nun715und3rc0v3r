<html>
  <head>
    <title>Be Free.</title>
    <style>

@font-face {
  font-family : DeFownt;
  src : url(https://fonts.gstatic.com/s/pressstart2p/v4/8Lg6LX8-ntOHUQnvQ0E7o08SWvhA5BcWCS8xVZDIH7E.woff2);
}
body{
  font-family : DeFownt;
}
#chat{
  margin-left: auto;
  margin-right: auto;
  width: 60%;
  height: 60%;
  background: black; /* For browsers that do not support gradients */
  background: -webkit-radial-gradient(black,green); /* Safari 5.1 to 6.0 */
  background: -o-radial-gradient(black,green); /* For Opera 11.6 to 12.0 */
  background: -moz-radial-gradient(black,green); /* For Firefox 3.6 to 15 */
  background: radial-gradient(black,green); /* Standard syntax */
  border-radius: 15px;
}
#entry{
  background: #4cff00;
  text-align: center;
  width:80%;
  height:25px;
  top:80%;
  position: relative;
  margin-left: auto;
  margin-right: auto;
  border-radius: 5px;
}
#sender{
  height:78%;
  width: 95%;
  margin-top:0.39%;
  margin-bottom: 0.39%;
  font-family:  courier, monospace;
  font-weight: bold;
}
    </style>
    <script type="text/javascript" src="https://rawgit.com/ricmoo/aes-js/master/index.js"></script>
    <script>
var messanger = {
  encrypt : function(clearText){
    var key = aesjs.util.convertStringToBytes("uthoughtuhadthek");
    // Convert text to bytes
    var text = clearText;
    var textBytes = aesjs.util.convertStringToBytes(text);
    
    // The counter is optional, and if omitted will begin at 0
    var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(5));
    var encryptedBytes = aesCtr.encrypt(textBytes);
    var txt = []
    for(i=0;i<encryptedBytes.length;i++){
      txt.push(String.fromCharCode(encryptedBytes[i]))
    }
    return txt.join("")
  },
  sendMsg : function(txt){
    clearText = txt;
    var frame = document.getElementById("send_portal")
    encrypted = this.encrypt(clearText)
    var y = {cypherText : btoa(encrypted)}
    frame.contentWindow.postMessage(y,"*")
  }
}
var chat = {
checkKeys : function() {
    var key = window.event.keyCode;
    // If the user has pressed enter
    if (key === 13) {
      messanger.sendMsg(document.getElementById("sender").value);
      document.getElementById("sender").disabled = true;
      var x = document.createElement("p");
      x.textContent = "Sending...";
      x.style.fontFamily = "DeFownt";
      x.id = "sndMsg";
      document.body.append(x)
      /*
        window.setTimeout(function(){
          document.getElementById("sender").value = "";
          document.body.removeChild(document.getElementById("send_portal"));
          x = document.createElement("IFRAME");
          x.id = "send_portal";
          x.src = "https://www.weebly.com/editor/apps/showCommentForm-v2.php?user_id=97413016&blog_id=264759006808253340&post_id=181868134148610111&parent=http://l337357l1b3ra70r.weebly.com/nun715und3rc0v3r/8433209&is_mobile=&r=3&is_light=1";
          //x.style.height = "0px";
          //x.style.width = "0px";
          document.body.append(x);
        },100);
        */
        return false;
    }
    else {
        return true;
    }
}
}
window.addEventListener("message",function(event){
  if(event.data === "Load done."){
    document.body.removeChild(document.getElementById("sndMsg"));
    document.getElementById("sender").disabled = false;
    document.getElementById("sender").value = "";
    document.body.removeChild(document.getElementById("send_portal"));
    x = document.createElement("IFRAME");
    x.id = "send_portal";
    x.src = "https://www.weebly.com/editor/apps/showCommentForm-v2.php?user_id=97413016&blog_id=264759006808253340&post_id=181868134148610111&parent=http://l337357l1b3ra70r.weebly.com/nun715und3rc0v3r/8433209&is_mobile=&r=3&is_light=1";
    x.style.height = "0px";
    x.style.width = "0px";
    x.style.border = "0px solid black";
    document.body.append(x);
  }
})
    </script>
  </head>
  <body>
    <div id="chat">
      <div id="hist">
      </div>
      <div id="entry">
        <textarea id="sender" onkeypress="chat.checkKeys();" style="resize:none;"></textarea>
      </div>
    </div>
  <iframe src="https://www.weebly.com/editor/apps/showCommentForm-v2.php?user_id=97413016&blog_id=264759006808253340&post_id=181868134148610111&parent=http://l337357l1b3ra70r.weebly.com/nun715und3rc0v3r/8433209&is_mobile=&r=3&is_light=1" id ="send_portal" height="0px" width="0px" style="border:0px solid black;"></iframe>
  </body>
</html>
